<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Details - Abdul Rafeh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6', // Sky 500
                        dark: '#0f172a',    // Slate 900
                        secondary: '#64748b' // Slate 500
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="js/data.js"></script>
</head>

<body class="bg-white text-slate-900 font-sans antialiased" x-data="projectPage()">

    <!-- Navigation (Light Version) -->
    <nav x-data="{ open: false, scrolled: false }" @scroll.window="scrolled = (window.pageYOffset > 20) ? true : false"
        :class="{ 'bg-white/90 backdrop-blur-md shadow-lg': scrolled, 'bg-white/90 backdrop-blur-md border-b border-slate-200': !scrolled }"
        class="fixed w-full top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-primary tracking-tighter">
                AR<span class="text-slate-900">.</span>
            </a>

            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-8 text-sm font-medium text-slate-900">
                <a href="index.html#about" class="hover:text-primary transition-colors">About</a>
                <a href="index.html#skills" class="hover:text-primary transition-colors">Skills</a>
                <a href="index.html#portfolio" class="hover:text-primary transition-colors">Portfolio</a>
                <a href="index.html#experience" class="hover:text-primary transition-colors">Experience</a>
                <a href="index.html#contact"
                    class="px-4 py-2 border border-primary text-primary rounded-full hover:bg-primary hover:text-white transition-all">Contact
                    Me</a>
            </div>

            <!-- Mobile Menu Button -->
            <button @click="open = !open" class="md:hidden focus:outline-none text-slate-900">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                    </path>
                </svg>
            </button>
        </div>

        <!-- Mobile Menu Dropdown -->
        <div x-show="open" @click.away="open = false"
            class="md:hidden bg-white border-t border-slate-200 absolute w-full left-0 shadow-xl">
            <div class="flex flex-col p-4 space-y-4 text-center text-slate-900">
                <a href="index.html#about" @click="open = false" class="block hover:text-primary">About</a>
                <a href="index.html#skills" @click="open = false" class="block hover:text-primary">Skills</a>
                <a href="index.html#portfolio" @click="open = false" class="block hover:text-primary">Portfolio</a>
                <a href="index.html#contact" @click="open = false" class="block text-primary">Contact Me</a>
            </div>
        </div>
    </nav>

    <!-- Project Logic -->
    <script>
        function projectPage() {
            return {
                project: null,
                profile: portfolioData.profile,
                activeImage: '',
                activeIndex: 0,
                autoplayInterval: null,

                init() {
                    const params = new URLSearchParams(window.location.search);
                    const id = params.get('id');

                    // Find project in flattened data
                    let found = null;
                    if (id) {
                        for (const category in portfolioData.portfolio) {
                            const match = portfolioData.portfolio[category].find(p => p.id === id);
                            if (match) {
                                found = match;
                                found.category = category; // Inject category
                                break;
                            }
                        }
                    }

                    if (found) {
                        this.project = found;
                        if (this.project.images && this.project.images.length > 0) {
                            this.activeImage = this.project.images[0];
                            if (this.project.images.length > 1) {
                                this.startAutoplay();
                                this.$watch('activeIndex', value => this.activeImage = this.project.images[value]);
                            }
                        }
                    } else {
                        // Redirect to home if not found
                        window.location.href = 'index.html';
                    }
                },
                startAutoplay() {
                    this.stopAutoplay();
                    this.autoplayInterval = setInterval(() => {
                        this.next();
                    }, 3000);
                },
                stopAutoplay() {
                    if (this.autoplayInterval) {
                        clearInterval(this.autoplayInterval);
                        this.autoplayInterval = null;
                    }
                },
                next() {
                    this.activeIndex = (this.activeIndex + 1) % this.project.images.length;
                },
                prev() {
                    this.activeIndex = (this.activeIndex - 1 + this.project.images.length) % this.project.images.length;
                },
                setImage(index) {
                    this.activeIndex = index;
                    this.stopAutoplay();
                    this.startAutoplay();
                },
                whatsappLink() {
                    return 'https://wa.me/' + this.profile.contact.mobile.replace(/-/g, '');
                }
            }
        }
    </script>

    <div class="min-h-screen pt-24 pb-12" x-show="project">
        <div class="container mx-auto px-4 lg:px-6 max-w-5xl">

            <!-- Breadcrumb -->
            <nav class="flex mb-6 text-sm text-slate-500">
                <a href="index.html" class="hover:text-primary transition-colors">Home</a>
                <span class="mx-2">/</span>
                <a href="index.html#portfolio" class="hover:text-primary transition-colors">Portfolio</a>
                <span class="mx-2">/</span>
                <span class="text-slate-800 font-medium" x-text="project?.category"></span>
            </nav>

            <!-- Carousel / Media Section (Top) -->
            <div class="mb-12">
                <!-- PDF Viewer -->
                <template x-if="project?.pdf">
                    <div
                        class="w-full h-[80vh] bg-slate-100 rounded-2xl overflow-hidden mb-4 border border-slate-200 shadow-lg relative">
                        <iframe :src="project.pdf" class="w-full h-full" type="application/pdf"></iframe>

                        <!-- Fallback / Download button if embedded view fails (optional but good UI) -->
                        <div class="absolute bottom-4 right-4">
                            <a :href="project.pdf" target="_blank"
                                class="bg-primary text-white px-4 py-2 rounded-lg shadow-lg hover:bg-sky-600 transition-colors flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Download PDF
                            </a>
                        </div>
                    </div>
                </template>

                <!-- Image Carousel (Only if no PDF) -->
                <template x-if="!project?.pdf">
                    <div>
                        <!-- Main Active Image -->
                        <div class="w-full h-[400px] md:h-[600px] bg-slate-100 rounded-2xl overflow-hidden mb-4 border border-slate-200 flex items-center justify-center relative group shadow-lg"
                            @mouseenter="stopAutoplay()" @mouseleave="startAutoplay()">

                            <template x-if="project?.images && project.images.length > 0">
                                <img :src="activeImage" :alt="project.title" class="w-full h-full object-contain"
                                    x-transition.opacity.duration.500ms>
                            </template>
                            <template x-if="!project?.images || project.images.length === 0">
                                <span class="text-6xl text-slate-300 font-bold"
                                    x-text="project?.title.charAt(0)"></span>
                            </template>

                            <!-- Navigation Buttons -->
                            <template x-if="project?.images && project.images.length > 1">
                                <div>
                                    <button @click="prev()"
                                        class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/10 backdrop-blur-md text-slate-800 p-3 rounded-full hover:bg-white/30 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100 border border-white/20 shadow-xl">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <button @click="next()"
                                        class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/10 backdrop-blur-md text-slate-800 p-3 rounded-full hover:bg-white/30 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100 border border-white/20 shadow-xl">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </button>
                                </div>
                            </template>
                        </div>

                        <!-- Thumbnails -->
                        <template x-if="project?.images && project.images.length > 1">
                            <div class="flex justify-center gap-3 overflow-x-auto pb-2 scrollbar-hide">
                                <template x-for="(img, index) in project.images" :key="index">
                                    <button @click="setImage(index)"
                                        class="shrink-0 w-24 h-16 md:w-32 md:h-20 rounded-lg border-2 transition-all cursor-pointer overflow-hidden relative"
                                        :class="activeIndex === index ? 'border-primary opacity-100 ring-2 ring-primary/20' : 'border-transparent opacity-60 hover:opacity-100'">
                                        <img :src="img" class="w-full h-full object-cover">
                                    </button>
                                </template>
                            </div>
                        </template>
                    </div>
                </template>
            </div>

            <!-- Project Header & Info -->
            <div class="max-w-4xl mx-auto">
                <div class="mb-8 text-center md:text-left">
                    <h1 class="text-3xl md:text-5xl font-bold text-slate-900 mb-6" x-text="project?.title"></h1>

                    <!-- Technologies -->
                    <div class="flex flex-wrap gap-2 justify-center md:justify-start mb-8">
                        <template x-for="tech in project?.technologies" :key="tech">
                            <span
                                class="px-4 py-2 bg-slate-100 text-slate-700 font-medium rounded-full text-sm border border-slate-200"
                                x-text="tech"></span>
                        </template>
                    </div>
                </div>

                <!-- Description -->
                <div class="prose prose-lg prose-slate max-w-none text-slate-600 leading-relaxed mb-16">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">About Our Work</h2>
                    <div class="bg-white rounded-2xl p-8 border border-slate-100 shadow-sm">
                        <p class="whitespace-pre-line" x-text="project?.description"></p>
                    </div>
                </div>

                <!-- Contact / CTA Section -->
                <div class="bg-slate-900 rounded-3xl p-8 md:p-12 text-center text-white relative overflow-hidden">
                    <!-- Decorative Gradients -->
                    <div
                        class="absolute top-0 right-0 w-64 h-64 bg-primary/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2">
                    </div>
                    <div
                        class="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2">
                    </div>

                    <div class="relative z-10">
                        <h2 class="text-3xl md:text-4xl font-bold mb-4">Interested in this project?</h2>
                        <p class="text-slate-300 mb-8 max-w-xl mx-auto text-lg">We can build a similar solution
                            customized for your business. Let's discuss your requirements.</p>

                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <a href="index.html#contact"
                                class="inline-flex items-center justify-center px-8 py-4 bg-primary text-white font-bold rounded-full hover:bg-sky-600 transition-all shadow-lg shadow-sky-500/30 text-lg group">
                                Contact Us
                                <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                                </svg>
                            </a>
                            <a :href="whatsappLink()" target="_blank"
                                class="inline-flex items-center justify-center px-8 py-4 bg-white/10 text-white font-bold rounded-full hover:bg-white/20 transition-all border border-white/20 backdrop-blur-sm text-lg">
                                WhatsApp
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-900 border-t border-slate-800 py-12 mt-20 relative z-10">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-2xl font-bold text-white mb-6">Let's Work Together</h2>
            <div class="flex justify-center space-x-6 mb-8">
                <template x-for="(link, platform) in profile.socials" :key="platform">
                    <a :href="link" target="_blank"
                        class="text-slate-400 hover:text-primary capitalize transition-colors" x-text="platform">
                    </a>
                </template>
            </div>
            <p class="text-slate-500 text-sm">
                &copy; <span x-text="new Date().getFullYear()"></span> <span x-text="profile.name"></span>. All rights
                reserved.
            </p>
        </div>
    </footer>

    <!-- Custom Cursor Elements -->
    <div id="cursor-dot"
        class="fixed w-2 h-2 bg-primary rounded-full pointer-events-none z-[9999] transform -translate-x-1/2 -translate-y-1/2 transition-transform duration-100 hidden md:block mix-blend-difference">
    </div>
    <div id="cursor-outline"
        class="fixed w-8 h-8 border border-primary rounded-full pointer-events-none z-[9999] transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 hidden md:block mix-blend-difference">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cursorDot = document.getElementById('cursor-dot');
            const cursorOutline = document.getElementById('cursor-outline');

            // Only activate on desktop
            if (window.matchMedia("(min-width: 768px)").matches) {
                window.addEventListener('mousemove', (e) => {
                    const posX = e.clientX;
                    const posY = e.clientY;

                    // Dot follows exactly
                    cursorDot.style.left = `${posX}px`;
                    cursorDot.style.top = `${posY}px`;

                    // Outline follows with slight delay (handled by CSS transition), simple position update
                    cursorOutline.style.left = `${posX}px`;
                    cursorOutline.style.top = `${posY}px`;
                });

                document.body.addEventListener('mouseover', (e) => {
                    if (e.target.closest('a, button, input, textarea, .group, .cursor-none-target')) {
                        cursorOutline.classList.add('scale-150', 'bg-primary/20', 'border-transparent');
                        cursorDot.classList.add('scale-50');
                    } else {
                        cursorOutline.classList.remove('scale-150', 'bg-primary/20', 'border-transparent');
                        cursorDot.classList.remove('scale-50');
                    }
                });

                // Hide default cursor
                document.body.style.cursor = 'none';
            }
        });
    </script>
</body>

</html>